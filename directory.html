<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'>
<meta http-equiv="Access-Control-Allow-Origin" content="*">
<title>CREATIVE ASSET INVENTORY</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="jquery/jquery-1.6.4.min.js"></script>


 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css"
   integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ=="
   crossorigin=""/>
 <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
   integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log=="
   crossorigin=""></script>
 <script src="randomColor.min.js"></script>
 <script src="spin-js/spin.js"></script>
 <script src="spin-js/jquery.spin.js"></script>
 <script src="http://maps.stamen.com/js/tile.stamen.js"></script>
<script src="MQ-geocode/mq-map.js"></script>
 <script src="MQ-geocode/mq-geocoding.js"></script>
 <script src="leaflet-pip/leaflet-pip.js"></script>
 
   <!-- Load Esri Leaflet from CDN -->
    <script src="https://unpkg.com/esri-leaflet@2.0.8"></script>
 
 <!-- Esri Leaflet Geocoder -->
    <link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder@2.2.6/dist/esri-leaflet-geocoder.css">
    <script src="https://unpkg.com/esri-leaflet-geocoder@2.2.6"></script>


<link rel="stylesheet" href="css/cai.css" />



<style>
		
</style>

</head>				
	
<body>

<div id="iconBar"><img src="sf-logo.png" width="90px" style="float:left"><img src="ct-logo.png" height="90px" style="float:left; padding-right:20px;"></div>
<div name="titlebar" >
	<div id="header">
		<h1 style="color:#fff;">CREATIVE ASSETS INVENTORY</h1>
	</div>
</div>
<div class="topnav" id="topMenu">
  <a href="survey.html">Add an Asset!</a>
  <a href="connect.html">Get Involved</a>
  <a href="directory.html">Directory</a>
  <a href="map.html">Map</a>
    <a href="index.html">About</a>
  <a href="javascript:void(0);" style="font-size:15px;" class="icon" onclick="loadMenu()">&#9776;</a>
</div>

<h1>Assets Entered So Far</h1>

<div id="directoryBox" style="width:100%;"></div>

<script type="text/javascript">

function loadMenu() {
    var x = document.getElementById("topMenu");
    if (x.className === "topnav") {
        x.className += " responsive";
    } else {
        x.className = "topnav";
    }
}



var assetURL = encodeURI("https://creativeassetinventory.carto.com/api/v2/sql?format=GeoJSON&q=SELECT * FROM cai_public limit 100");

var rawList;
function pullDirectory() {
	var assetDirectory = $.getJSON(assetURL, function(data) {
	rawList = data.features;

	displayAssets(rawList);
	});
}

pullDirectory();
				
function getAssetColor(d) {
  switch (d) {
    case 'Space or Facility (includes vacant spaces)':
      return '#b30000';
	case 'Creative Places -- Cultural Facilities, Natural/Urban Spaces, Potential Resources':
	        return '#b30000';
    case 'Cultural Industries and Businesses':
      return '#ff9900';
    case 'Supporting Resources':
      return '#ff9900';
    case 'Business':
      return '#ff9900';
    case 'Creative People -- Cultural Professionals and Artists':
      return '#b2df8a';
    case 'Cultural Institutions, Nonprofits, and Educational Organizations':
      return '#ff0066';
	case 'Community Cultural Associations':
		return '#ff0066';
    case 'Cultural Events and Festivals':
      return '#fb9a99';
    default:
      return '#FFEDA0';
  }
  }
 
function displayAssets(list) {
	document.getElementById("directoryBox").innerHTML ='';
	var dirtyList = list;
	var assetList = [];
	var j=0;

			for (n=0; n<=dirtyList.length-1; n++) {
				if (dirtyList[n].properties.a_name !== "") {
					assetList[j] = dirtyList[n];
					console.log(assetList[j]);
					j++;
				}
			}
			for (n=0; n<=assetList.length-1; n++) {
				var imageUrl = assetList[n].properties.photolink;
				console.log(imageUrl);
				var aName = assetList[n].properties.a_name;
				document.getElementById("directoryBox").innerHTML +=
				"<table><tr><td valign='top' style='padding-right:20px'>" +
				"<img src='" + imageUrl + "' width='150px'>" + 
				"</td>" + 
				"<td valign='top' width='90%'>" +
				"<h2>" + assetList[n].properties.a_name + "</h2>" +
				assetList[n].properties.pub_add + 
				"<br>" +
				"<a href='"+ assetList[n].website +"'>" + assetList[n].properties.website + "</a>" +
				"<hr>" +
				assetList[n].properties.a_desc + "<br>" +
				"<br><b>Type: </b>"+ assetList[n].properties.a_type + "<br>" +
				"</td>"+
				"</tr></table>"+
				"<hr>" ;
			}
	
	}
 



		
			
			

			

	
</script> 
  

</body>
</html>
